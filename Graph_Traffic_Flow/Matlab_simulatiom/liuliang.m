clc,clear,close all
jds=39;
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
s=[1	1	2	2	3	4	5	6	6	7	8	9	10	11	12	13	14	14	15	15	16	16	17	18	18	19	20	21	21	22	22	23	25	25	26	27	28	29	29	30	31	34	35	37	38	38																																																																														
];
t=[2	4	3	8	7	14	9	11	37	6	5	10	35	12	13	23	17	19	13	22	37	38	16	20	38	18	21	22	25	23	26	27	26	31	29	28	39	28	30	28	29	27	34	15	15	21
];
w=[63.33 	64.29 	308.00 	27.83 	45.89 	33.69 	65.77 	455.00 	878.00 	60.00 	505.00 	32.85 	49.08 	36.62 	624.00 	49.46 	27.36 	82.50 	1191.00 	43.43 	73.00 	286.50 	61.89 	49.25 	120.25 	216.00 	481.00 	258.50 	44.69 	111.11 	57.10 	46.20 	519.00 	33.14 	58.88 	167.60 	26.21 	75.50 	48.00 	25.33 	106.25 	590.00 	3400.00 	397.50 	102.40 	35.80 
];
figure
subplot(2,3,1)
G = digraph(s,t,w); %directed graph
myplot=plot(G);
layout(myplot,'layered','Direction','up','Sources',[1 4])
title("路径1");
[P1,d1]=shortestpath(G,1,jds);
highlight(myplot,P1,'EdgeColor','r','LineWidth',2);
% P1
% fprintf("路径1时间为：%2.1f分钟\n",d1/60);
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
s=[1	1	2	2	3	4	5	6	6	7	8	9	10	11	12	13	14	14	15	15	16	17	18	18	19	20	21	21	22	22	23	25	25	26	27	28	29	29	30	31	34	35	37	38	38
];
t=[2	4	3	8	7	14	9	11	37	6	5	10	35	12	13	23	17	19	13	22	37	16	20	38	18	21	22	25	23	26	27	26	31	29	28	39	28	30	28	29	27	34	15	15	21
];
w=[63.33 	90.00 	308.00 	27.83 	45.89 	48.67 	65.77 	455.00 	878.00 	60.00 	505.00 	32.85 	49.08 	36.62 	624.00 	49.46 	38.30 	82.50 	1191.00 	43.43 	73.00 	111.40 	49.25 	120.25 	216.00 	481.00 	258.50 	64.56 	111.11 	57.10 	46.20 	519.00 	46.40 	58.88 	167.60 	36.70 	75.50 	80.00 	38.00 	212.50 	590.00 	3400.00 	397.50 	102.40 	59.67 
];
subplot(2,3,2)
G = digraph(s,t,w); %directed graph
myplot=plot(G);
layout(myplot,'layered','Direction','up','Sources',[1 4])
title("路径2");
[P2,d2]=shortestpath(G,1,jds);
highlight(myplot,P2,'EdgeColor','r','LineWidth',2);
% P2
% fprintf("路径2时间为：%2.1f分钟\n",d2/60);
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
s=[1	1	2	2	3	4	5	6	6	7	8	9	10	11	12	13	14	14	15	15	16	17	18	19	20	21	21	22	22	23	25	25	26	27	28	29	29	30	31	34	35	37	38	38	
];
t=[2	4	3	8	7	14	9	11	37	6	5	10	35	12	13	23	17	19	13	22	37	16	20	18	21	22	25	23	26	27	26	31	29	28	39	28	30	28	29	27	34	15	15	21
];
w=[63.33 	150.00 	308.00 	27.83 	45.89 	87.60 	65.77 	455.00 	878.00 	60.00 	505.00 	32.85 	49.08 	36.62 	624.00 	49.46 	38.30 	165.00 	1191.00 	101.33 	73.00 	111.40 	49.25 	1080.00 	481.00 	258.50 	64.56 	111.11 	95.17 	46.20 	519.00 	46.40 	117.75 	167.60 	61.17 	226.50 	80.00 	38.00 	212.50 	590.00 	3400.00 	397.50 	512.00 	59.67 
];
subplot(2,3,3)
G = digraph(s,t,w); %directed graph
% myplot=plot(G,'Layout','force');
myplot=plot(G);
% layout(myplot,'layered','Direction','right','Sources',[1 4])
title("路径3");
[P3,d3]=shortestpath(G,1,jds);
layout(myplot,'layered','Direction','up','Sources',[1 4])
highlight(myplot,P3,'EdgeColor','r','LineWidth',2);
% P3
% fprintf("路径3时间为：%2.1f分钟\n",d3/60);
% 
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
s=[1	1	2	2	3	4	5	6	6	7	8	9	10	11	12	13	14	14	15	15	16	17	18	19	20	21	21	22	22	23	25	25	26	27	28	29	29	30	31	34	35	38	38
];
t=[2	4	3	8	7	14	9	11	37	6	5	10	35	12	13	23	17	19	13	22	37	16	20	18	21	22	25	23	26	27	26	31	29	28	39	28	30	28	29	27	34	15	21
];
w=[63.33 	225.00 	308.00 	27.83 	45.89 	146.00 	65.77 	455.00 	878.00 	60.00 	505.00 	32.85 	49.08 	36.62 	624.00 	49.46 	47.88 	165.00 	1191.00 	304.00 	93.86 	185.67 	49.25 	1080.00 	481.00 	258.50 	64.56 	142.86 	95.17 	57.75 	519.00 	46.40 	117.75 	279.33 	91.75 	226.50 	80.00 	38.00 	212.50 	590.00 	3400.00 	512.00 	59.67 
];
subplot(2,3,4)
G = digraph(s,t,w); %directed graph
myplot=plot(G);
layout(myplot,'layered','Direction','up','Sources',[1 4])
title("路径4");
[P4,d4]=shortestpath(G,1,jds);
highlight(myplot,P4,'EdgeColor','r','LineWidth',2);
% P4
% fprintf("路径4时间为：%2.1f分钟\n",d4/60);
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
s=[1	1	2	2	3	4	5	6	6	7	8	9	10	11	13	14	14	15	15	16	17	18	19	20	21	21	22	22	23	25	25	26	27	28	29	29	30	31	34	35	38	38
];
t=[2	4	3	8	7	14	9	11	37	6	5	10	35	12	23	17	19	13	22	37	16	20	18	21	22	25	23	26	27	26	31	29	28	39	28	30	28	29	27	34	15	21
];
w=[71.25 	225.00 	616.00 	27.83 	51.63 	146.00 	65.77 	910.00 	878.00 	66.67 	505.00 	32.85 	49.08 	39.67 	53.58 	47.88 	165.00 	1191.00 	304.00 	93.86 	185.67 	49.25 	1080.00 	481.00 	258.50 	64.56 	142.86 	95.17 	66.00 	519.00 	46.40 	117.75 	419.00 	122.33 	226.50 	80.00 	38.00 	212.50 	590.00 	3400.00 	512.00 	59.67 
];
subplot(2,3,5)
G = digraph(s,t,w); %directed graph
myplot=plot(G);
layout(myplot,'layered','Direction','up','Sources',[1 4])
title("路径5");
[P5,d5]=shortestpath(G,1,jds);
highlight(myplot,P5,'EdgeColor','r','LineWidth',2);
% P5
% fprintf("路径5时间为：%2.1f分钟\n",d5/60);
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
s=[1	1	2	2	3	4	5	6	6	7	8	9	10	11	13	14	14	15	15	16	17	18	21	21	22	22	23	25	25	26	27	28	29	29	30	31	34	35	38	38		
];
t=[2	4	3	8	7	14	9	11	37	6	5	10	35	12	23	17	19	13	22	37	16	20	22	25	23	26	27	26	31	29	28	39	28	30	28	29	27	34	15	21
];
w=[71.25 	300.00 	616.00 	27.83 	51.63 	219.00 	65.77 	910.00 	878.00 	66.67 	505.00 	32.85 	49.08 	39.67 	53.58 	47.88 	220.00 	1191.00 	304.00 	93.86 	185.67 	56.29 	258.50 	72.63 	142.86 	95.17 	66.00 	519.00 	51.56 	117.75 	419.00 	183.50 	453.00 	80.00 	38.00 	283.33 	590.00 	3400.00 	512.00 	59.67 		
];
subplot(2,3,6)
G = digraph(s,t,w); %directed graph
myplot=plot(G);
layout(myplot,'layered','Direction','up','Sources',[1 4])
title("路径6");
[P6,d6]=shortestpath(G,1,jds);
highlight(myplot,P6,'EdgeColor','r','LineWidth',2);
% P6
% fprintf("路径6时间为：%2.1f分钟\n",d6/60);
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
s=[1	1	2	2	3	4	5	6	6	7	9	10	11	13	14	14	15	15	16	17	18	21	21	22	22	23	25	25	26	27	28	29	29	30	31	34	38	38
];
t=[2	4	3	8	7	14	9	11	37	6	10	35	12	23	17	19	13	22	37	16	20	22	25	23	26	27	26	31	29	28	39	28	30	28	29	27	15	21
];
w=[81.43 	300.00 	616.00 	33.40 	51.63 	219.00 	71.25 	910.00 	878.00 	66.67 	35.58 	53.17 	39.67 	53.58 	47.88 	220.00 	1191.00 	304.00 	93.86 	185.67 	56.29 	258.50 	72.63 	142.86 	95.17 	66.00 	519.00 	51.56 	117.75 	838.00 	367.00 	453.00 	80.00 	38.00 	283.33 	168.57 	512.00 	59.67 
];
figure
G = digraph(s,t,w); %directed graph
myplot=plot(G);
layout(myplot,'force','UseGravity',true)
title("残余网络");

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
s=load('s.txt'); t=load('t.txt'); w=load('w.txt'); 
 w1=load('tmp1.txt'); 
jds=39;
w2=w./60./w1;
juli=sparse(s,t,w,jds,jds); %有向图描述转换成邻接矩阵(距离矩阵)
shijian=sparse(s,t,w2,jds,jds); %有向图描述转换成邻接矩阵(矩阵)
ans1=0;  ans2=0; ans3=0; ans4=0;  ans5=0; ans6=0;
n1=size(P1)-1;n2=size(P2)-1;n3=size(P3)-1;n4=size(P4)-1;
n5=size(P5)-1; n6=size(P6)-1;
for k=1:n1(2) %最小增广路的结点数
  ans1=ans1+juli(P1(k),P1(k+1));
end
for k=1:n2(2) %最小增广路的结点数
  ans2=ans2+juli(P2(k),P2(k+1));
end
for k=1:n3(2) %最小增广路的结点数
  ans3=ans3+juli(P3(k),P3(k+1));
end
for k=1:n4(2) %最小增广路的结点数
  ans4=ans4+juli(P4(k),P4(k+1));
end
for k=1:n5(2) %最小增广路的结点数
  ans5=ans5+juli(P5(k),P5(k+1));
end
for k=1:n6(2) %最小增广路的结点数
  ans6=ans6+juli(P6(k),P6(k+1));
end
fprintf("路径1距离和时间分别为：%d米  %2.1f分钟\n",ans1,d1/60);
fprintf("路径2距离和时间分别为：%d米  %2.1f分钟\n",ans2,d2/60);
fprintf("路径3距离和时间分别为：%d米  %2.1f分钟\n",ans3,d3/60);
fprintf("路径4距离和时间分别为：%d米  %2.1f分钟\n",ans4,d4/60);
fprintf("路径5距离和时间分别为：%d米  %2.1f分钟\n",ans5,d5/60);
fprintf("路径6距离和时间分别为：%d米  %2.1f分钟\n",ans6,d6/60);